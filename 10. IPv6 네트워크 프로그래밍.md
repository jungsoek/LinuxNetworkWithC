# 10. IPv6 ë„¤íŠ¸ì›Œí¬ í”„ë¡œê·¸ë˜ë°

## 10.1 IPv6 ì£¼ì†Œ êµ¬ì¡° ì´í•´

### âœ… IPv6 ë„ì… ë°°ê²½

IPv6ëŠ” ê¸°ì¡´ IPv4ì˜ ì£¼ì†Œ ê³ ê°ˆ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë“±ì¥í•œ ì°¨ì„¸ëŒ€ ì¸í„°ë„· í”„ë¡œí† ì½œì´ë‹¤.
 IPv4ê°€ ì•½ 43ì–µ ê°œì˜ ì£¼ì†Œ(2Â³Â²)ë¥¼ ì œê³µí•˜ëŠ” ë°˜ë©´, IPv6ëŠ” **2Â¹Â²â¸**ê°œì˜ ì£¼ì†Œ ê³µê°„ì„ ì œê³µí•˜ì—¬, ì‚¬ì‹¤ìƒ ë¬´í•œì— ê°€ê¹Œìš´ ê³ ìœ  ì£¼ì†Œë¥¼ í• ë‹¹í•  ìˆ˜ ìˆê²Œ í•œë‹¤.

------

### âœ… IPv6 ì£¼ì†Œ ê¸°ë³¸ êµ¬ì¡°

- ì´ **128ë¹„íŠ¸** ê¸¸ì´
- **16ë¹„íŠ¸ì”© 8ê°œì˜ ë¸”ë¡**ìœ¼ë¡œ êµ¬ë¶„
- **16ì§„ìˆ˜ë¡œ í‘œí˜„**í•˜ë©°, ê° ë¸”ë¡ì€ `:`ë¡œ êµ¬ë¶„

```
2001:0db8:0000:0042:0000:8a2e:0370:7334
```

------

### âœ… ì¶•ì•½ ê·œì¹™

#### **1. ì•ì˜ 0 ìƒëµ ê°€ëŠ¥**

```
2001:0db8:0000:0000:0000:0000:0000:0001
â†’ 2001:db8:0:0:0:0:0:1
```

#### **2. ì—°ì†ëœ 0ì€ "::"ìœ¼ë¡œ í•œ ë²ˆë§Œ ì¶•ì•½ ê°€ëŠ¥**

```
2001:db8::1
(ì¤‘ê°„ 6ê°œì˜ ë¸”ë¡ì´ 0ì¼ ë•Œ)
```

> `::`ëŠ” IPv6 ì£¼ì†Œì—ì„œ ë‹¨ í•œ ë²ˆë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

------

### âœ… ì£¼ì†Œ ìœ í˜• (Prefix ê¸°ì¤€)

| ì£¼ì†Œ ìœ í˜•   | Prefix      | ì„¤ëª…                              |
| ----------- | ----------- | --------------------------------- |
| ìœ ë‹ˆìºìŠ¤íŠ¸  | `2000::/3`  | ë‹¨ì¼ í˜¸ìŠ¤íŠ¸ ëŒ€ìƒ                  |
| ë§í¬ë¡œì»¬    | `fe80::/10` | ê°™ì€ ë§í¬ ë‚´ í†µì‹  (ë¼ìš°í„° ê²½ìœ  X) |
| ë©€í‹°ìºìŠ¤íŠ¸  | `ff00::/8`  | ë‹¤ìˆ˜ ìˆ˜ì‹ ì ëŒ€ìƒ ë¸Œë¡œë“œìºìŠ¤íŠ¸     |
| ë£¨í”„ë°±      | `::1`       | ìê¸° ìì‹  (localhost)             |
| ì–¸ì§€ì • ì£¼ì†Œ | `::`        | ì´ˆê¸°í™”ë˜ì§€ ì•Šì€ ì£¼ì†Œ              |

------

### âœ… IPv6 ì£¼ì†Œ êµ¬ì„± ìš”ì†Œ

IPv6 ì£¼ì†ŒëŠ” ëŒ€ê°œ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ë‰œë‹¤:

| êµ¬ê°„                  | ì„¤ëª…                                                |
| --------------------- | --------------------------------------------------- |
| Global Routing Prefix | ìƒìœ„ ISP ë˜ëŠ” ë¼ìš°íŒ… ë„ë©”ì¸ ì‹ë³„ (ex. `2001:db8::`) |
| Subnet ID             | ë„¤íŠ¸ì›Œí¬ ë‚´ ì„œë¸Œë„· êµ¬ë¶„                             |
| Interface ID          | í˜¸ìŠ¤íŠ¸ë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„ (MAC â†’ EUI-64)               |

------

### âœ… Interface Identifier (64ë¹„íŠ¸)

- ì¼ë°˜ì ìœ¼ë¡œ **MAC ì£¼ì†Œ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±** (EUI-64 ë°©ì‹)
- ì˜ˆ: `00:1A:2B:3C:4D:5E` â†’ `021a:2bff:fe3c:4d5e`
  - MAC ì£¼ì†Œ 48ë¹„íŠ¸ â†’ ì¤‘ê°„ì— `fffe` ì‚½ì…, ì• ë¹„íŠ¸ ì¡°ì •

------

### âœ… IPv6 ì£¼ì†Œ ì˜ˆì‹œ

```
Full : 2001:0db8:0000:0000:0000:ff00:0042:8329  
Short: 2001:db8::ff00:42:8329
```

------

### âœ… IPv6 vs IPv4 ì£¼ìš” ë¹„êµ

| í•­ëª©          | IPv4                    | IPv6                            |
| ------------- | ----------------------- | ------------------------------- |
| ì£¼ì†Œ ê¸¸ì´     | 32ë¹„íŠ¸                  | 128ë¹„íŠ¸                         |
| í‘œê¸°ë²•        | 10ì§„ìˆ˜ 4ì˜¥í…Ÿ (`.` êµ¬ë¶„) | 16ì§„ìˆ˜ 8ë¸”ë¡ (`:` êµ¬ë¶„)         |
| NAT í•„ìš” ì—¬ë¶€ | í•„ìˆ˜                    | í•„ìš” ì—†ìŒ (ê³ ìœ  ì£¼ì†Œ ì‚¬ìš©)      |
| ë¸Œë¡œë“œìºìŠ¤íŠ¸  | ì§€ì›                    | ì§€ì›í•˜ì§€ ì•ŠìŒ (ë©€í‹°ìºìŠ¤íŠ¸ ì‚¬ìš©) |
| ë³´ì•ˆ          | ì„ íƒì (IPSec)           | í•„ìˆ˜ (ê¸°ë³¸ í¬í•¨)                |

------

### âœ… ì‹¤ì „ ì‚¬ìš© ì‹œ ìœ ì˜ì 

- IPv6 ì£¼ì†ŒëŠ” ì£¼ì†Œ ìì²´ì— **ë¼ìš°íŒ…/ì„œë¸Œë„· ì •ë³´ê°€ í¬í•¨**ë˜ì–´ ìˆìŒ
- **ARPë¥¼ ëŒ€ì‹ í•´ NDP(Neighbor Discovery Protocol)** ì‚¬ìš©
- IPv4ì™€ëŠ” ë‹¤ë¥¸ **ì´ì¤‘ ìŠ¤íƒ(Dual Stack)** í™˜ê²½ í•„ìš” (IPv4 â†” IPv6 ë³‘í–‰)

## 10.2 `sockaddr_in6`, `inet_pton`, `inet_ntop` ì‚¬ìš©ë²•

### âœ… 1. `sockaddr_in6` êµ¬ì¡°ì²´

IPv6 ì£¼ì†Œë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ `struct sockaddr_in6`ì„ ì‚¬ìš©í•œë‹¤. ì´ëŠ” `AF_INET6` ì£¼ì†Œ ì²´ê³„ì— ëŒ€ì‘í•˜ë©° IPv6 í†µì‹  ì‹œ `bind()`, `connect()`, `accept()` ë“±ì˜ ì†Œì¼“ í•¨ìˆ˜ì—ì„œ í™œìš©ëœë‹¤.

```
#include <netinet/in.h>

struct sockaddr_in6 {
    sa_family_t     sin6_family;   // ì£¼ì†Œ ì²´ê³„: AF_INET6
    in_port_t       sin6_port;     // í¬íŠ¸ ë²ˆí˜¸ (ë„¤íŠ¸ì›Œí¬ ë°”ì´íŠ¸ ì˜¤ë”)
    uint32_t        sin6_flowinfo; // í”Œë¡œìš° ì •ë³´ (ì¼ë°˜ì ìœ¼ë¡œ 0)
    struct in6_addr sin6_addr;     // IPv6 ì£¼ì†Œ
    uint32_t        sin6_scope_id; // ë§í¬ ë¡œì»¬ ì£¼ì†Œì˜ ì¸í„°í˜ì´ìŠ¤ ì‹ë³„ì
};
```

- `sin6_family`: `AF_INET6`ë¡œ ì„¤ì •
- `sin6_port`: `htons(port)`ë¡œ ì„¤ì •
- `sin6_addr`: `inet_pton()`ì„ í†µí•´ ì„¤ì •
- `sin6_scope_id`: ë§í¬-ë¡œì»¬ ì£¼ì†Œì¼ ê²½ìš° ì¸í„°í˜ì´ìŠ¤ ì§€ì • í•„ìš”

------

### âœ… 2. `inet_pton()` í•¨ìˆ˜

IPv6 ì£¼ì†Œë¥¼ **ë¬¸ìì—´ â†’ ë°”ì´ë„ˆë¦¬**ë¡œ ë³€í™˜

```
#include <arpa/inet.h>

int inet_pton(int af, const char *src, void *dst);
```

| ë§¤ê°œë³€ìˆ˜ | ì„¤ëª…                                              |
| -------- | ------------------------------------------------- |
| `af`     | ì£¼ì†Œ ì²´ê³„ (`AF_INET`, `AF_INET6`)                 |
| `src`    | ë¬¸ìì—´ í˜•íƒœì˜ ì£¼ì†Œ (ì˜ˆ: `"::1"`)                  |
| `dst`    | `struct in6_addr` í¬ì¸í„° (ë°”ì´ë„ˆë¦¬ í˜•íƒœë¡œ ì €ì¥ë¨) |

```
struct sockaddr_in6 addr6;
inet_pton(AF_INET6, "2001:db8::1", &addr6.sin6_addr);
```

------

### âœ… 3. `inet_ntop()` í•¨ìˆ˜

IPv6 ì£¼ì†Œë¥¼ **ë°”ì´ë„ˆë¦¬ â†’ ë¬¸ìì—´**ë¡œ ë³€í™˜

```
const char *inet_ntop(int af, const void *src, char *dst, socklen_t size);
```

| ë§¤ê°œë³€ìˆ˜ | ì„¤ëª…                                |
| -------- | ----------------------------------- |
| `af`     | ì£¼ì†Œ ì²´ê³„ (`AF_INET`, `AF_INET6`)   |
| `src`    | `struct in6_addr` í¬ì¸í„°            |
| `dst`    | ì¶œë ¥ ë¬¸ìì—´ ë²„í¼                    |
| `size`   | ë²„í¼ í¬ê¸° (ë³´í†µ `INET6_ADDRSTRLEN`) |

```
char ipstr[INET6_ADDRSTRLEN];
inet_ntop(AF_INET6, &addr6.sin6_addr, ipstr, sizeof(ipstr));
printf("IPv6 ì£¼ì†Œ: %s\n", ipstr);
```

------

### âœ… ì˜ˆì œ ì½”ë“œ (IPv6 ì£¼ì†Œ ì„¤ì • ë° ì¶œë ¥)

```
#include <stdio.h>
#include <string.h>
#include <arpa/inet.h>
#include <netinet/in.h>

int main() {
    struct sockaddr_in6 addr6;
    char ip_str[INET6_ADDRSTRLEN] = "2001:db8::1";
    char ip_output[INET6_ADDRSTRLEN];

    memset(&addr6, 0, sizeof(addr6));
    addr6.sin6_family = AF_INET6;
    addr6.sin6_port = htons(8080);

    if (inet_pton(AF_INET6, ip_str, &addr6.sin6_addr) <= 0) {
        perror("inet_pton ì‹¤íŒ¨");
        return 1;
    }

    if (inet_ntop(AF_INET6, &addr6.sin6_addr, ip_output, sizeof(ip_output)) == NULL) {
        perror("inet_ntop ì‹¤íŒ¨");
        return 1;
    }

    printf("IPv6 ì£¼ì†Œ ì¶œë ¥: %s\n", ip_output);
    return 0;
}
```

ì¶œë ¥ ì˜ˆì‹œ:

```
IPv6 ì£¼ì†Œ ì¶œë ¥: 2001:db8::1
```

------

### âœ… ì£¼ì˜ì‚¬í•­

| í•­ëª©                            | ì„¤ëª…                                                         |
| ------------------------------- | ------------------------------------------------------------ |
| `inet_pton` ì‹¤íŒ¨ ì‹œ `<= 0` ë°˜í™˜ | ì…ë ¥ ì£¼ì†Œ í˜•ì‹ì´ ì˜ëª»ëœ ê²½ìš° í¬í•¨                            |
| `inet_ntop` ì‹¤íŒ¨ ì‹œ `NULL` ë°˜í™˜ | ë©”ëª¨ë¦¬ ì˜¤ë¥˜ í˜¹ì€ í¬ì¸í„° ë¬¸ì œ                                 |
| `sin6_scope_id`                 | `fe80::` ë“± ë§í¬ë¡œì»¬ ì£¼ì†Œì—ì„œëŠ” ì„¤ì • í•„ìˆ˜ (ì˜ˆ: `en0`, `eth0`ì˜ ifindex ì‚¬ìš©) |

## 10.3 IPv6 ì„œë²„/í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„

IPv6 ê¸°ë°˜ì˜ ì†Œì¼“ í†µì‹ ì€ ê¸°ì¡´ IPv4ì™€ ë§¤ìš° ìœ ì‚¬í•˜ì§€ë§Œ, ì£¼ì†Œ ì²´ê³„(`AF_INET6`), êµ¬ì¡°ì²´(`sockaddr_in6`), í¬ë§· í•¨ìˆ˜(`inet_pton`, `inet_ntop`) ë“±ì´ IPv6ì— ë§ê²Œ ë³€ê²½ë˜ì–´ì•¼ í•œë‹¤.

------

### âœ… ì„œë²„ ì¸¡ êµ¬í˜„ ì˜ˆì œ

```
// ipv6_server.c
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <netinet/in.h>

#define PORT 8080
#define BUFFER_SIZE 1024

int main() {
    int server_fd, client_fd;
    struct sockaddr_in6 server_addr, client_addr;
    char buffer[BUFFER_SIZE];
    socklen_t client_len = sizeof(client_addr);

    server_fd = socket(AF_INET6, SOCK_STREAM, 0);
    if (server_fd < 0) {
        perror("socket ì‹¤íŒ¨");
        exit(EXIT_FAILURE);
    }

    memset(&server_addr, 0, sizeof(server_addr));
    server_addr.sin6_family = AF_INET6;
    server_addr.sin6_port = htons(PORT);
    server_addr.sin6_addr = in6addr_any;

    if (bind(server_fd, (struct sockaddr*)&server_addr, sizeof(server_addr)) < 0) {
        perror("bind ì‹¤íŒ¨");
        exit(EXIT_FAILURE);
    }

    listen(server_fd, 5);
    printf("[ì„œë²„] ëŒ€ê¸° ì¤‘ (IPv6, í¬íŠ¸ %d)...\n", PORT);

    client_fd = accept(server_fd, (struct sockaddr*)&client_addr, &client_len);
    if (client_fd < 0) {
        perror("accept ì‹¤íŒ¨");
        exit(EXIT_FAILURE);
    }

    char client_ip[INET6_ADDRSTRLEN];
    inet_ntop(AF_INET6, &client_addr.sin6_addr, client_ip, sizeof(client_ip));
    printf("[ì„œë²„] ì—°ê²°ë¨: %s\n", client_ip);

    ssize_t len = read(client_fd, buffer, sizeof(buffer) - 1);
    if (len > 0) {
        buffer[len] = '\0';
        printf("[ì„œë²„] ë°›ì€ ë©”ì‹œì§€: %s\n", buffer);
    }

    close(client_fd);
    close(server_fd);
    return 0;
}
```

------

### âœ… í´ë¼ì´ì–¸íŠ¸ ì¸¡ êµ¬í˜„ ì˜ˆì œ

```
// ipv6_client.c
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <netinet/in.h>

#define SERVER_ADDR "2001:db8::1"  // ë˜ëŠ” ::1 (localhost)
#define PORT 8080

int main() {
    int sock;
    struct sockaddr_in6 server_addr;
    char *message = "ì•ˆë…•í•˜ì„¸ìš”, ì„œë²„!";

    sock = socket(AF_INET6, SOCK_STREAM, 0);
    if (sock < 0) {
        perror("socket ì‹¤íŒ¨");
        exit(EXIT_FAILURE);
    }

    memset(&server_addr, 0, sizeof(server_addr));
    server_addr.sin6_family = AF_INET6;
    server_addr.sin6_port = htons(PORT);
    if (inet_pton(AF_INET6, SERVER_ADDR, &server_addr.sin6_addr) <= 0) {
        perror("inet_pton ì‹¤íŒ¨");
        exit(EXIT_FAILURE);
    }

    if (connect(sock, (struct sockaddr*)&server_addr, sizeof(server_addr)) < 0) {
        perror("connect ì‹¤íŒ¨");
        exit(EXIT_FAILURE);
    }

    write(sock, message, strlen(message));
    printf("[í´ë¼ì´ì–¸íŠ¸] ë©”ì‹œì§€ ì „ì†¡ ì™„ë£Œ\n");

    close(sock);
    return 0;
}
```

------

### âœ… ì£¼ìš” ì°¨ì´ì  ìš”ì•½

| í•­ëª©           | IPv4 (`AF_INET`)         | IPv6 (`AF_INET6`)                      |
| -------------- | ------------------------ | -------------------------------------- |
| ì£¼ì†Œ êµ¬ì¡°ì²´    | `struct sockaddr_in`     | `struct sockaddr_in6`                  |
| ì£¼ì†Œ í•„ë“œ      | `sin_addr.s_addr`        | `sin6_addr`                            |
| í¬íŠ¸ í•„ë“œ      | `sin_port`               | `sin6_port`                            |
| ì£¼ì†Œ í•´ì„ í•¨ìˆ˜ | `inet_pton`, `inet_ntop` | ë™ì¼í•˜ê²Œ ì‚¬ìš© (`AF_INET6`)             |
| ë°”ì¸ë”© ì£¼ì†Œ    | `INADDR_ANY`             | `in6addr_any` (`::`)                   |
| íŠ¹ì´ì‚¬í•­       | ì—†ìŒ                     | ë§í¬-ë¡œì»¬ ì‹œ `sin6_scope_id` ì„¤ì • í•„ìš” |

------

### âœ… ì‹¤ì „ ì£¼ì˜ì‚¬í•­

- **IPv6ë§Œ ì‚¬ìš© ì‹œ** í´ë¼ì´ì–¸íŠ¸/ì„œë²„ ëª¨ë‘ IPv6 ì†Œì¼“ì„ ì‚¬ìš©í•´ì•¼ ì—°ê²° ê°€ëŠ¥
- **ë“€ì–¼ ìŠ¤íƒ** ì‚¬ìš© ì‹œ IPv6 ì†Œì¼“ì´ IPv4ë¥¼ ìˆ˜ìš©í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆì§€ë§Œ OS ì„¤ì • í•„ìš”
- ë§í¬ ë¡œì»¬ ì£¼ì†Œ(`fe80::`)ë¥¼ ì‚¬ìš©í•  ê²½ìš° ë°˜ë“œì‹œ `scope_id`ë¥¼ ì§€ì •í•´ì•¼ í•œë‹¤ (ì˜ˆ: `sin6_scope_id = if_nametoindex("eth0")`)

## 10.4 ë“€ì–¼ ìŠ¤íƒ ì„œë²„ êµ¬í˜„

ë“€ì–¼ ìŠ¤íƒ ì„œë²„ë€ í•˜ë‚˜ì˜ ì„œë²„ì—ì„œ **IPv4ì™€ IPv6 ìš”ì²­ì„ ëª¨ë‘ ìˆ˜ì‹ **í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ë¥¼ ì˜ë¯¸í•œë‹¤.
 ìš´ì˜ì²´ì œì™€ ì†Œì¼“ ì„¤ì •ì— ë”°ë¼ ë‹¤ìŒ ë‘ ê°€ì§€ ë°©ì‹ì´ ìˆë‹¤.

------

### âœ… 1. ë°©ë²• ê°œìš”

| ë°©ì‹                    | ì„¤ëª…                                          |
| ----------------------- | --------------------------------------------- |
| â‘  ë‹¨ì¼ IPv6 ì†Œì¼“        | IPv6 ì†Œì¼“ í•˜ë‚˜ë¡œ IPv4ë„ ì²˜ë¦¬ (OSê°€ ë§¤í•‘ ì§€ì›) |
| â‘¡ IPv4 + IPv6 ê°ê° ìƒì„± | ê°ê° ì†Œì¼“ì„ ë§Œë“¤ì–´ ë™ì‹œì— `listen()`          |

------

### âœ… 2. ê¸°ë³¸ ì „ì œ

- ì†Œì¼“ ìƒì„± ì‹œ `AF_INET6` ì‚¬ìš©
- `setsockopt()`ìœ¼ë¡œ `IPV6_V6ONLY` ì˜µì…˜ì„ ì ì ˆíˆ ì„¤ì •
- ìš´ì˜ì²´ì œì— ë”°ë¼ `dual-stack socket` ì§€ì› ì—¬ë¶€ í™•ì¸ í•„ìš” (Linux ê¸°ë³¸ì€ **off**)

------

### âœ… ë°©ë²• 1: IPv6 ì†Œì¼“ í•˜ë‚˜ë¡œ IPv4ë„ ì²˜ë¦¬

```
// dual_stack_server.c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <netinet/in.h>

#define PORT 8080

int main() {
    int server_fd;
    struct sockaddr_in6 addr;
    int opt = 0;

    server_fd = socket(AF_INET6, SOCK_STREAM, 0);
    if (server_fd < 0) {
        perror("socket");
        exit(1);
    }

    // ì¤‘ìš”í•œ ë¶€ë¶„: IPV6_V6ONLY = 0 â†’ IPv4ë„ í—ˆìš©
    opt = 0;
    if (setsockopt(server_fd, IPPROTO_IPV6, IPV6_V6ONLY, &opt, sizeof(opt)) < 0) {
        perror("setsockopt IPV6_V6ONLY");
        exit(1);
    }

    memset(&addr, 0, sizeof(addr));
    addr.sin6_family = AF_INET6;
    addr.sin6_port = htons(PORT);
    addr.sin6_addr = in6addr_any;

    if (bind(server_fd, (struct sockaddr*)&addr, sizeof(addr)) < 0) {
        perror("bind");
        exit(1);
    }

    listen(server_fd, 5);
    printf("ë“€ì–¼ ìŠ¤íƒ ì„œë²„ ì‹œì‘ (IPv4 + IPv6 ìˆ˜ì‹ )\n");

    while (1) {
        struct sockaddr_storage client_addr;
        socklen_t client_len = sizeof(client_addr);
        int client_fd = accept(server_fd, (struct sockaddr*)&client_addr, &client_len);

        char ipstr[INET6_ADDRSTRLEN];
        void *addr_ptr;

        if (client_addr.ss_family == AF_INET) {
            struct sockaddr_in *v4 = (struct sockaddr_in*)&client_addr;
            addr_ptr = &(v4->sin_addr);
        } else {
            struct sockaddr_in6 *v6 = (struct sockaddr_in6*)&client_addr;
            addr_ptr = &(v6->sin6_addr);
        }

        inet_ntop(client_addr.ss_family, addr_ptr, ipstr, sizeof(ipstr));
        printf("í´ë¼ì´ì–¸íŠ¸ ì ‘ì†: %s\n", ipstr);

        close(client_fd);
    }

    close(server_fd);
    return 0;
}
```

------

### âœ… ë°©ë²• 2: IPv4ì™€ IPv6 ì†Œì¼“ì„ ê°ê° ìƒì„±

```
// í•µì‹¬ ê°œë…ë§Œ ì •ë¦¬

int ipv4_fd = socket(AF_INET, SOCK_STREAM, 0);
int ipv6_fd = socket(AF_INET6, SOCK_STREAM, 0);

// ê°ì bind(), listen() â†’ select/epollë¡œ ì²˜ë¦¬
```

- ë‘ ì†Œì¼“ ëª¨ë‘ `bind()`í•˜ê³ 
- `select()`, `poll()`, `epoll()`ë¡œ **ë™ì‹œì— ëª¨ë‹ˆí„°ë§**
- êµ¬í˜„ ë³µì¡ë„ëŠ” ì¦ê°€í•˜ì§€ë§Œ OS ì œí•œ ì—†ì´ í™•ì¥ì„± ë†’ìŒ

------

### âœ… Linux ë™ì‘ íŠ¹ì§•

- ê¸°ë³¸ì ìœ¼ë¡œ **IPv6 ì†Œì¼“ì´ IPv4ë¥¼ ìˆ˜ì‹ í•˜ì§€ ëª»í•¨**
- `IPV6_V6ONLY` ì˜µì…˜ì„ **0ìœ¼ë¡œ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •**í•´ì•¼ ë“€ì–¼ ìŠ¤íƒ ë™ì‘ ê°€ëŠ¥
- `/proc/sys/net/ipv6/bindv6only` ê°’ì´ 0ì¼ ê²½ìš°, ì‹œìŠ¤í…œ ì „ì—­ ì„¤ì •ìœ¼ë¡œ dual-stack í—ˆìš©

------

### ğŸ“Œ ë¹„êµ ìš”ì•½

| í•­ëª©           | ë‹¨ì¼ ì†Œì¼“ ë°©ì‹            | ì´ì¤‘ ì†Œì¼“ ë°©ì‹              |
| -------------- | ------------------------- | --------------------------- |
| OS ì„¤ì • ì˜ì¡´   | ìˆìŒ (Linux: ê¸°ë³¸ ë¹„í—ˆìš©) | ì—†ìŒ                        |
| êµ¬í˜„ ë‚œì´ë„    | ë‚®ìŒ                      | ë†’ìŒ                        |
| ì„±ëŠ¥/ìœ ì—°ì„±    | ë³´í†µ                      | ìš°ìˆ˜                        |
| ê¶Œì¥ ì‚¬ìš© ì‹œì  | ê°œì¸ ì„œë²„, í…ŒìŠ¤íŠ¸ ìš©ë„    | ì‹¤ë¬´, ê³ ì„±ëŠ¥, ë©€í‹°í¬íŠ¸ í™˜ê²½ |

------

### âœ³ï¸ ì°¸ê³ 

- WindowsëŠ” ê¸°ë³¸ì ìœ¼ë¡œ dual-stackì„ ì§€ì›í•˜ë©°, `IPV6_V6ONLY`ê°€ ê¸°ë³¸ `false`
- IPv4 ì£¼ì†Œê°€ `::ffff:127.0.0.1` í˜•ì‹ìœ¼ë¡œ IPv6 ì£¼ì†Œë¡œ ë§µí•‘ë¨ (IPv4-mapped IPv6 address)